# useReducer 훅을 사용해 컴포넌트 상태 관리

여러 상태 값을 항상 함께 갱신해야만 하거나 로직이 지나치게 흩어져 따라가기 어려운 경우, 상태 갱신을 대신 관리하는 함수를 리듀서 함수라 한다.

예시)
데이터 적재

새 포스트 요청이 있으면 읽는 중이라는 ui 표시
문제가 발생하면 오류 ui 표시
포스트가 도착하면 포스트를 표시

- 적재 중 상태
- 오류
- 포스트

컴포넌트가 게시물을 요청하면 적재 중 상태를 true, 오류 상태를 null 포스트를 빈 배열로 설정할 수 있다.

이벤트 하나가 세 가지 상태로 변경한다.
포스트 들이 도착하면 적재 중 상태를 false로 설정. 포스트들을 받은 값으로 설정할 수 있다. 이 경우에는 이벤트가 두 가지 상태로 변경한다.
이런 상태 값들을 useState 훅을 통해 관리할 수도 있지만 이벤트에 대한 반응으로 갱신함수(setLoading, setError, setPosts 등)를 호출해야 하는 경우엔 useReducer 훅이라는 더 좋은 대안을 제공한다.

## 단일 이벤트에 대한 응답으로 여러 상태 값 갱신하기

컴포넌트가 여러 상태 값을 유지해야 할 수 있고 그 상태 값들이 서로 연관된 경우가 종종 있다. 이런 경우 미처 정리되지 않은 상태 값을 방치하지 않도록 주의해야 한다.

여러 이ㄴ트가 여러 상태 변경을 촉발하면 이런 변경을 추적하고 모든 연관된 상태값을 제대로 함께 갱신하는 일이 점점 더 어려워진다.

상ㅐ값이 서로에게 영향을 끼치거나 종종 함께 변경되는 경우, 변경을 수행하는 코드를 여러 이벤트 핸들러 함수(핸들ㄹ러는 인라인될 수도, 별도의 함수로 분리될 수도 있음)에 분산시키는 것보다는 상태 갱신 로직을 한곳에 모으는 것이 도움이 될 수 있다. 이런 상태 갱신 로직 모음을 관리하기 위해 useReducer 훅을 제공힌다.

useReducer로 더 복잡한 상태 관리

- 리듀서를 활용하면 상태에 영향을 미치는 명확한 액션을 통해 상태 변경을 중앙 집중식으로 잘 정의해 관리
- 액션을 사용해 이전 상태로부터 새 상태를 생성, 서로 연관된 여러 상태를 포함할 수 있는 복잡한 갱신을 쉽게 지정
- useReducer 훅을 통해 컴포넌트 초기 상태를 지정, 현재 상태에 접근 -> 상태를 갱신하고 재렌더링 촉발
- 명확하게 정의된 액션을 디스패치하면 상태 변경을 따라가기 쉽고, 컴포넌트가 여러 이벤트에 대한 응답으로 상태와 상호작용하는 방식을 이해하기 쉬워짐

*리듀서* 는 상태 값과 액션 값을 받는 함수. 
인자로 받은 상태 값과 액션 값을 가지고 새 상태 값을 생성. 
상태와 액션은 숫자나 문자열 같은 기본값일 수도, 더 복잡한 객체일 수도 있다.
리듀서를 사용하면 상태를 갱신하는 모든 방법을 한 장소에 모아두기에 한 액션이 여러 상태 값에 영향을 주는 경우 상태 변경을 쉽게 관리 할 수 있다.

```
let count = 0

function reducer  (state, action) { // 기존 상태와 액션을 받는 리듀서 함수 정의
    if (action === "inc") {
        return state + 1
    }
    if (action === "dec") {
        return state -1 
    }
    return state
}

count = reducer(count, "inc") // 리듀서를 사용 카운터 증가
count = reducer(count, "inc")
count = reducer(count, "dec") // 리듀서를 사용 카운터 감소
```

리듀서는 증가와 감소 액션을 처리, 그 외의 액션은 변경하지 않은 카운터 값을 반환(인식 못하는 액션을 조용히 무시하는 대신 오류를 던질 수 있다)

두 작은 액션에 대해 리듀서를 사용하는 것이 지나친 것 같지만, 액션을 쉽게 확장할 수 있다.

useState 훅을 사용하면 리액트에게 컴포넌트의 상태 값을 하나 관리하게 할 수 있다. 
useReducer 훅을 사용하면 리듀서와 컴포넌트의 초기 상태를 전달해서 리액트가 값을 관리하는데 약간의 도움을 줄 수 있다.

애플리케이션에서 이벤트가 발생하면 우리는 리액트에게 새 값을 전달하는 대신 액션을 디스패치하고, 리액트는 리듀서에 있는 관련 코드를 사용해 새 상태를 생성한 다음, 최신 UI를 위해 컴포넌트를 호출

useReducer 훅을 호출할 때 리듀서와 초기 상태를 전달한다. 

useState와 마찬가지로, useReducer의 경우에도 돌려받은 배열의 두 원소를 지정한 이름의 변수에 대입하기 위해 배열 구조 분해를 사용한다. 