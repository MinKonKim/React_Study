## fetch
- `fetch`는 응답 객체를 반환하는 `Promise`를 반환하며, 응답 객체에서 데이터를 가져올 수 있다.
- `200에서 299까지`의 범위에 속하지 않는 `HTTP 상태 코드`도 올바른 상태 코드이기 때문에 fetch는 자동으로 예외를 던지지 않는다.
- 따라서 HTTP 상태 코드를 직접 검사해서 예외를 던져야한다.
- 이 함수에서 예외를 catch로 잡아내지 않으므로 함수를 호출하는 코드에서 catch 블록을 설정해야한다.
<br>

## 응답을 자바스크립트 객체로 변환하기
- 응답이 검사를 통과하면, 서버에서 반환한 `json 문자열`을 응답의 json 메서드를 호출해 `자바스크립트 객체`로 변환한다.
- json 메서드는 데이터 객체를 내놓는 프로미스를 반환하며, 우리는 이 프로미스를 함수에서 반환한다.
```js
export default function getData(url) {
  return fetch(url)
    .then(resp => {
      if (!resp.ok) {
        throw Error("There was a problem fetching data.");
        return resp.json();
      }
    })
}
```
- getData함수는 fetch에서 얻은 응답에 대한 전처리를 수행한다.
- 이 함수는 약간은 `미들웨어` 처럼 작동한다.
- 리액트/리덕스에서 미들웨어는 디스패치된 액션과 리듀서 사이에 있는 함수로 상태 갱신을 막지 않으면서 부수 효과를 실행하게 해주는 역할을 한다.
- 보통 로그, 오류 보고, 라우팅 등을 미들웨어로 처리한다.
<br>

## 요약
- 때로는 컴포넌트가 리액트 데이터 흐름 과정을 벗어나 다른 API(가장 흔한 것은 브라우저)와 직접 상호작용한다.
- 어떤 방식으로든 외부 세계에 영향을 주는 작업을 `부수 효과`라고 한다. (컴포넌트의 렌더링 과정에서 발생 X)
- 일반적인 부수 효과에는 페이지 제목을 명령형으로 설정하기, setInterval이나 setTimeout 같은 타이머 작업, DOM 엘리먼트의 너비, 높이, 위치를 측정하기, 콘솔에 메시지 로그를 남기기, 지역 저장소에 값을 저장하거나 가져오기, (서버나 DB 등에서) 데이터를 읽어오거나 서비스를 구독하거나 구독 취소하기 등이 있다.
- `효과 함수`는 리액트의 useEffect 훅을 통해 정의되는 함수로, 부수 효과를 처리하기 위해 사용한다.
- 리액트는 모든 렌더링이 끝난 다음에 효과 함수를 실행한다.
- 예를 들어, 데이터 fetching을 위해 useEffect 내에 fetch 요청을 작성할 수 있다.
- 언제 효과 함수가 실행되는지 관리하기 위해 useEffect 훅의 두 번째 인자로 `의존 관계 배열`을 전달할 수 있다.
- 빈 의존 관계 배열을 전달하면 컴포넌트가 마운트될 때 한 번만 효과가 실행된다.
- 모든 효과 함수의 의존 관계를 의존 관계 배열에 포함시키면 지정한 의존 관계 값이 변경될 때마다 리액트가 효과 함수를 실행하게 된다.
- 리액트는 컴포넌트를 렌더링하고 데이터를 읽어오는 코드를 실행한다. 또한 리액트는 데이터가 도착하면 컴포넌트를 다시 렌더링한다.
- 재렌더링 시 렌더링이 끝나고 실행해야하는 효과가 여럿 있는 경우, 리액트는 실행할 모든 효과의 정리 함수 호출이 끝난 다음에야 효과를 호출하기 시작한다.
<br>

## useRef
- `useRef`가 반환하는 객체의 이름은 `ref`로 `참조객체`라고 한다.
- useState 훅 사용시 상태 값 갱신 함수를 호출하면 일반적으로 재렌더링이 발생한다.
- useRef 훅을 사용하면 이런 UI `재렌더링 없이` 상태값을 갱신할 수 있다.
- 상태 값을 관리하되 상태 변경 시 리액트가 UI를 재렌더링하는 일을 피하고 싶을 때 useRef 훅을 사용한다.
- 예를 들어, setTimeout이나 setInterval의 ID를 저장하거나 DOM 엘리먼트에 대한 참조를 저장할 때 useRef 훅을 사용할 수 있다.
- 필요하다면 useRef 함수에게 초깃값을 전달할 수 있다. useRef는 current라는 프로퍼티를 가진 객체를 돌려준다. 
