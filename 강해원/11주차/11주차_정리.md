## 데이터 읽어오기와 Suspense 통합하기
- React의 Suspense와 데이터 적재를 통합하는 방법은 아직 실험 단계에 있기 때문에 주의해서 사용해야 합니다.
- uspense와 데이터 적재를 통합하기 위해 몇 가지 실험적인 방법을 사용할 수 있습니다. 하지만 프로덕션 환경에서는 반드시 신뢰할 수 있는 라이브러리를 활용하고, React와 라이브러리의 버전을 일치시켜야 합니다. 이는 버전 불일치로 발생할 수 있는 문제를 방지하기 위함입니다. Suspense와 데이터 적재의 통합을 안전하게 사용하려면 향후 API가 고정될 때까지 신중해야 합니다
<br/>

## Suspense와 데이터 적재 함수의 구조
- 데이터 적재 함수는 아래와 같은 형태를 따라야 합니다:
- 데이터를 읽어오는 프로미스를 생성합니다.
- 이 프로미스는 Suspense에 맞게 동작하도록, 상태에 따라 데이터를 반환하거나 오류를 던져야 합니다.
- 예를 들어, 데이터를 읽어오는 프로미스를 상태 확인 함수로 감싸는 방법은 다음과 같습니다:
- ```js
  const checkStatus = getStatusChecker(promise);
  ```
  또한, 데이터 적재가 완료되었거나 오류가 발생한 경우에 적절한 처리를 수행하는 함수는 다음과 같이 구현할 수 있습니다:
  ```js
  const getMessageOrThrower(promise);
  ```
<br/>

## 데이터 적재와 컴포넌트 통합
- 컴포넌트 내부에서 위에서 준비한 데이터를 활용하여 UI를 업데이트할 수 있습니다. 예를 들어, 다음과 같이 데이터를 읽어와 UI에 표시할 수 있습니다:
- ```js
  function Message() {
    const data = getMessageOrThrow();
    return <p>{data.message}</p>;
  }
  ```
<br/>

## 데이터 적재를 가능한 빨리 시작하기
- 데이터 적재는 앱의 실행 흐름에서 가능한 한 빨리 시작하는 것이 좋습니다.
- 예를 들어, 버튼 클릭 이벤트와 같은 사용자 상호작용이 발생했을 때 데이터를 미리 읽어오는 방식으로 구현할 수 있습니다.
<br/>

## 오류 복구 제공
- 사용자가 데이터 적재 중 발생한 오류를 쉽게 복구할 수 있도록 해야 합니다.
- 이를 위해 react-error-boundary와 같은 라이브러리를 사용할 수 있습니다.
- 이 라이브러리는 오류를 잡아내고 사용자에게 적절한 복구 방법을 제공합니다.
<br/>

## 이미지나 스크립트 같은 자원 적재
- Suspense를 활용하여 이미지나 스크립트와 같은 자원을 적재할 때도 위와 같은 프로미스 처리 기법을 사용할 수 있습니다.
- 데이터뿐만 아니라 모든 종류의 자원 적재에 적용이 가능합니다.
<br/>

## 캐싱과 다중 요청 관리
- 데이터 적재를 보다 효율적으로 관리하기 위해 React Query와 같은 라이브러리를 사용할 수 있습니다.
- React Query는 데이터 적재, 캐싱, 그리고 다중 요청 관리 기능을 제공합니다.
- 이를 통해 Suspense와 데이터 적재를 효과적으로 통합할 수 있습니다.
- 특히 queryClient.prefetchQuery 메서드를 호출하여 데이터를 미리 적재할 수 있습니다. 
- 이렇게 하면 사용자가 데이터를 요청하기 전에 필요한 리소스를 준비할 수 있습니다.
<br/>

## 폭포수 방식의 데이터 적재 피하기
- 폭포수 방식은 한 자원의 적재가 완료된 후에야 다음 자원의 적재를 시작하는 방식입니다.
- 이는 적재 시간을 불필요하게 늘릴 수 있습니다.
- 따라서 최대한 병렬로 자원을 적재하는 방식으로 구현하는 것이 좋습니다.
<br/>

## 정리
- Suspense와 데이터 적재를 통합하는 것은 UI의 사용자 경험을 향상시킬 수 있는 강력한 방법입니다.
- 하지만 현재는 실험 단계에 있으므로 신중하게 접근해야 하며,
- 적절한 라이브러리와 기술을 활용하여 안전하고 효율적인 방식으로 구현해야 합니다.
